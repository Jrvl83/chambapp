<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="theme-color" content="#0066FF">
    <meta name="description" content="Perfil de trabajador en ChambApp">
    <meta name="robots" content="noindex">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon.png">

    <title>Perfil de Trabajador - ChambApp</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/design-system.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/header-simple.css?v=2">
    <link rel="stylesheet" href="css/toast.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/perfil-publico.css">

    <style>
        /* Lightbox (inline, patron de perfil-trabajador) */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
        }

        .lightbox-img {
            max-width: 100%;
            max-height: 80vh;
            object-fit: contain;
            border-radius: 8px;
        }

        .lightbox-close {
            position: absolute;
            top: -50px;
            right: 0;
            background: white;
            color: var(--dark);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            color: var(--dark);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .lightbox-nav:hover {
            background: white;
            transform: translateY(-50%) scale(1.1);
        }

        .lightbox-nav.prev { left: -70px; }
        .lightbox-nav.next { right: -70px; }

        @media (max-width: 768px) {
            .lightbox-nav.prev { left: 10px; }
            .lightbox-nav.next { right: 10px; }
            .lightbox-nav { width: 40px; height: 40px; font-size: 1.25rem; }
            .lightbox-close { top: -45px; }
        }

        .lightbox-counter {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 1rem;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- ============================================
         HEADER
         ============================================ -->
    <header class="header">
        <div class="header-content">
            <a href="dashboard.html" class="logo">
                <img src="/assets/logo/logo-icono.png" alt="ChambApp" class="logo-img">
                <span class="logo-text">ChambApp</span>
            </a>
            <a id="btn-volver" href="mis-aplicaciones.html" class="btn-volver">‚Üê Volver</a>
        </div>
    </header>

    <main>
        <!-- ============================================
             LOADING STATE
             ============================================ -->
        <div id="loading-state" class="pp-loading">
            <div class="spinner"></div>
            <p>Cargando perfil...</p>
        </div>

        <!-- ============================================
             ERROR STATE
             ============================================ -->
        <div id="error-state" class="pp-error-state" style="display: none;">
            <div class="pp-error-icon">üòï</div>
            <h2 id="error-title">Perfil no encontrado</h2>
            <p id="error-message">No se pudo encontrar el perfil solicitado.</p>
            <a href="mis-aplicaciones.html" class="btn btn-primary">‚Üê Volver a Candidatos</a>
        </div>

        <!-- ============================================
             PERFIL CONTENT
             ============================================ -->
        <div id="perfil-content" class="pp-container" style="display: none;">

            <!-- HERO -->
            <section class="pp-hero">
                <div class="pp-hero-content">
                    <div class="pp-hero-photo-wrapper">
                        <img id="pp-foto" class="pp-hero-photo" src="" alt="Foto de perfil">
                        <div id="pp-disponible-badge" class="pp-disponible-badge" style="display: none;">
                            <span class="pp-disponible-dot"></span>
                            Disponible
                        </div>
                    </div>
                    <div class="pp-hero-info">
                        <h1 id="pp-nombre" class="pp-hero-nombre"></h1>
                        <div id="pp-rating-badge" class="pp-hero-rating"></div>
                        <div id="pp-ubicacion" class="pp-hero-ubicacion"></div>
                        <div id="pp-categorias" class="pp-hero-categorias"></div>
                    </div>
                </div>
            </section>

            <!-- BIO -->
            <section id="pp-bio-section" class="pp-section" style="display: none;">
                <h2 class="pp-section-title">Acerca de</h2>
                <p id="pp-bio" class="pp-bio-text"></p>
            </section>

            <!-- PORTFOLIO -->
            <section id="pp-portfolio-section" class="pp-section" style="display: none;">
                <h2 class="pp-section-title">üì∏ Portfolio de Trabajos</h2>
                <div id="pp-portfolio-grid" class="pp-portfolio-grid"></div>
            </section>

            <!-- HABILIDADES Y EXPERIENCIA -->
            <section id="pp-skills-section" class="pp-section" style="display: none;">
                <h2 class="pp-section-title">Habilidades y Experiencia</h2>
                <div id="pp-anos-exp" class="pp-anos-exp" style="display: none;"></div>
                <div id="pp-habilidades" class="pp-habilidades-list"></div>
                <div id="pp-experiencia" class="pp-experiencia-list"></div>
            </section>

            <!-- RESENAS -->
            <section id="pp-reviews-section" class="pp-section" style="display: none;">
                <h2 class="pp-section-title">Calificaciones y Rese√±as</h2>
                <div id="pp-reviews-summary"></div>
                <div id="pp-reviews-list" class="pp-reviews-list"></div>
            </section>

            <!-- DISPONIBILIDAD -->
            <section id="pp-disponibilidad-section" class="pp-section" style="display: none;">
                <h2 class="pp-section-title">Disponibilidad</h2>
                <div id="pp-disponibilidad" class="pp-disponibilidad-content"></div>
            </section>

        </div>
    </main>

    <!-- ============================================
         LIGHTBOX
         ============================================ -->
    <div id="pp-lightbox" class="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="cerrarLightboxPublico()">&#10005;</button>
            <button class="lightbox-nav prev" onclick="navegarLightboxPublico('prev')">&#9664;</button>
            <img id="pp-lightbox-img" class="lightbox-img" src="" alt="Portfolio">
            <button class="lightbox-nav next" onclick="navegarLightboxPublico('next')">&#9654;</button>
            <div class="lightbox-counter" id="pp-lightbox-counter">1 / 1</div>
        </div>
    </div>

    <!-- ============================================
         SCRIPTS
         ============================================ -->
    <script src="js/config/firebase-config.js"></script>
    <script src="js/toast.js"></script>
    <script type="module" src="js/perfil-publico/index.js"></script>
</body>
</html>
